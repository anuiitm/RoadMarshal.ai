{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/components/Chip.tsx"],"sourcesContent":["\"use client\";\nimport clsx from \"clsx\";\n\nexport default function Chip({\n  label,\n  selected = false,\n  onClick,\n  className = \"\"\n}: {\n  label: string;\n  selected?: boolean;\n  onClick?: () => void;\n  className?: string;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={clsx(\n        \"px-3 py-1 rounded-full text-sm border transition\",\n        selected\n          ? \"bg-emerald-600 text-white border-emerald-600 shadow-sm\"\n          : \"bg-white dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700 text-zinc-900 dark:text-zinc-100\",\n        className\n      )}\n    >\n      {label}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,KAAK,EAC3B,KAAK,EACL,WAAW,KAAK,EAChB,OAAO,EACP,YAAY,EAAE,EAMf;IACC,qBACE,0PAAC;QACC,SAAS;QACT,WAAW,IAAA,4JAAI,EACb,oDACA,WACI,2DACA,mGACJ;kBAGD;;;;;;AAGP"}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/lib/computeIssues.ts"],"sourcesContent":["export function computeIssuesForCategory(category: string, catalog: any) {\n  const subtypes = catalog[category] || {};\n  const issueSet = new Set<string>();\n\n  Object.values(subtypes).forEach((subtypeObj: any) => {\n    if (Array.isArray(subtypeObj.problems)) {\n      subtypeObj.problems.forEach((p: string) => issueSet.add(p.trim()));\n    }\n  });\n\n  return Array.from(issueSet).sort();\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,yBAAyB,QAAgB,EAAE,OAAY;IACrE,MAAM,WAAW,OAAO,CAAC,SAAS,IAAI,CAAC;IACvC,MAAM,WAAW,IAAI;IAErB,OAAO,MAAM,CAAC,UAAU,OAAO,CAAC,CAAC;QAC/B,IAAI,MAAM,OAAO,CAAC,WAAW,QAAQ,GAAG;YACtC,WAAW,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAc,SAAS,GAAG,CAAC,EAAE,IAAI;QAChE;IACF;IAEA,OAAO,MAAM,IAAI,CAAC,UAAU,IAAI;AAClC"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/lib/computeSubtypes.ts"],"sourcesContent":["export function computeSubtypesForIssue(category: string, issue: string, catalog: any) {\n  const subtypes = catalog[category] || {};\n  const valid: string[] = [];\n\n  Object.entries(subtypes).forEach(([subtypeName, subtypeObj]: any) => {\n    if (Array.isArray(subtypeObj.problems) && subtypeObj.problems.includes(issue)) {\n      valid.push(subtypeName);\n    }\n  });\n\n  return valid.sort();\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,wBAAwB,QAAgB,EAAE,KAAa,EAAE,OAAY;IACnF,MAAM,WAAW,OAAO,CAAC,SAAS,IAAI,CAAC;IACvC,MAAM,QAAkB,EAAE;IAE1B,OAAO,OAAO,CAAC,UAAU,OAAO,CAAC,CAAC,CAAC,aAAa,WAAgB;QAC9D,IAAI,MAAM,OAAO,CAAC,WAAW,QAAQ,KAAK,WAAW,QAAQ,CAAC,QAAQ,CAAC,QAAQ;YAC7E,MAAM,IAAI,CAAC;QACb;IACF;IAEA,OAAO,MAAM,IAAI;AACnB"}},
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/components/CategoryCard.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useMemo } from \"react\";\nimport Chip from \"./Chip\";\nimport clsx from \"clsx\";\nimport { computeIssuesForCategory } from \"@/lib/computeIssues\";\nimport { computeSubtypesForIssue } from \"@/lib/computeSubtypes\";\n\n/**\n * PROPS:\n *  - category: string\n *  - catalog: any\n *  - onChange: (allIssueRows) => parent receives entire card data\n */\nexport default function CategoryCard({ category, catalog, onChange }: any) {\n  const issuesAvailable = computeIssuesForCategory(category, catalog);\n\n  // MULTIPLE ISSUE ROWS\n  const [rows, setRows] = useState([\n    { issue: \"\", subtypes: [], speed: \"\", notes: \"\", openStep: 1 }\n  ]);\n\n  // Notify parent whenever rows update\n  const updateRows = (next: any) => {\n    setRows(next);\n    onChange?.(next);\n  };\n\n  // Add a new row\n  const addRow = () => {\n    const next = [\n      ...rows,\n      { issue: \"\", subtypes: [], speed: \"\", notes: \"\", openStep: 1 }\n    ];\n    updateRows(next);\n  };\n\n  // Helpers\n  const updateField = (i: number, patch: any) => {\n    const next = [...rows];\n    next[i] = { ...next[i], ...patch };\n    updateRows(next);\n  };\n\n  const toggleSubtype = (i: number, subtype: string) => {\n    const next = [...rows];\n    const row = next[i];\n    row.subtypes = row.subtypes.includes(subtype)\n      ? row.subtypes.filter((x: string) => x !== subtype)\n      : [...row.subtypes, subtype];\n    updateRows(next);\n  };\n\n  const previewSentence = (row: any) => {\n    if (!row.issue || !row.subtypes.length) return \"\";\n    const iss = row.issue;\n    const subs = row.subtypes.join(\" | \");\n    const speed = row.speed ? ` on ${row.speed} road` : \"\";\n    return `${iss} ${subs}${speed}.`;\n  };\n\n  return (\n    <div className=\"w-full bg-white dark:bg-zinc-900 border rounded-lg p-5 shadow-sm space-y-6\">\n      <h3 className=\"text-lg font-semibold\">{category}</h3>\n\n      {rows.map((row, i) => {\n        const subtypesAvailable = row.issue\n          ? computeSubtypesForIssue(category, row.issue, catalog)\n          : [];\n\n        return (\n          <div\n            key={i}\n            className=\"border rounded-lg p-4 bg-zinc-50 dark:bg-zinc-800 space-y-4\"\n          >\n            {/* Row Header */}\n            <div className=\"flex justify-between items-center\">\n              <div className=\"font-medium\">Issue Group #{i + 1}</div>\n              {i > 0 && (\n                <button\n                  className=\"text-xs text-red-500\"\n                  onClick={() => {\n                    const next = rows.filter((_, idx) => idx !== i);\n                    updateRows(next);\n                  }}\n                >\n                  Remove\n                </button>\n              )}\n            </div>\n\n            {/* STEP 1 — ISSUE (single select) */}\n            <div>\n              <div className=\"text-sm font-medium flex justify-between\">\n                <span>1. Select Issue</span>\n                {row.openStep !== 1 && (\n                  <button\n                    className=\"text-xs text-blue-600\"\n                    onClick={() => updateField(i, { openStep: 1 })}\n                  >\n                    Edit\n                  </button>\n                )}\n              </div>\n\n              {row.openStep === 1 ? (\n                <div className=\"mt-3 flex flex-wrap gap-2\">\n                  {issuesAvailable.map((iss: string) => (\n                    <Chip\n                      key={iss}\n                      label={iss}\n                      selected={row.issue === iss}\n                      onClick={() =>\n                        updateField(i, {\n                          issue: iss,\n                          subtypes: [],\n                        })\n                      }\n                    />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"mt-2 text-sm text-zinc-500\">\n                  {row.issue || \"No issue selected\"}\n                </div>\n              )}\n\n              {row.openStep === 1 && row.issue && (\n                <div className=\"mt-3 flex justify-end\">\n                  <button\n                    className=\"px-4 py-2 bg-emerald-600 text-white rounded\"\n                    onClick={() => updateField(i, { openStep: 2 })}\n                  >\n                    Next\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* STEP 2 — SUBTYPES (multi-select) */}\n            <div>\n              <div className=\"text-sm font-medium flex justify-between\">\n                <span>2. Select Subtype(s)</span>\n                {row.openStep !== 2 && (\n                  <button\n                    className=\"text-xs text-blue-600\"\n                    onClick={() => updateField(i, { openStep: 2 })}\n                  >\n                    Edit\n                  </button>\n                )}\n              </div>\n\n              {row.openStep === 2 ? (\n                <div className=\"mt-3 flex flex-wrap gap-2\">\n                  {subtypesAvailable.length === 0 ? (\n                    <div className=\"text-sm text-zinc-500\">\n                      No subtypes for this issue.\n                    </div>\n                  ) : (\n                    subtypesAvailable.map((s: string) => (\n                      <Chip\n                        key={s}\n                        label={s}\n                        selected={row.subtypes.includes(s)}\n                        onClick={() => toggleSubtype(i, s)}\n                      />\n                    ))\n                  )}\n                </div>\n              ) : (\n                <div className=\"mt-2 text-sm text-zinc-500\">\n                  {row.subtypes.length\n                    ? row.subtypes.join(\" | \")\n                    : \"No subtypes selected\"}\n                </div>\n              )}\n\n              {row.openStep === 2 && row.subtypes.length > 0 && (\n                <div className=\"mt-3 flex justify-between\">\n                  <button\n                    className=\"px-3 py-2 border rounded\"\n                    onClick={() => updateField(i, { openStep: 1 })}\n                  >\n                    Back\n                  </button>\n                  <button\n                    className=\"px-4 py-2 bg-emerald-600 text-white rounded\"\n                    onClick={() => updateField(i, { openStep: 3 })}\n                  >\n                    Next\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* STEP 3 — SPEED & NOTES */}\n            <div>\n              <div className=\"text-sm font-medium flex justify-between\">\n                <span>3. Speed & Notes (optional)</span>\n                {row.openStep !== 3 && (\n                  <button\n                    className=\"text-xs text-blue-600\"\n                    onClick={() => updateField(i, { openStep: 3 })}\n                  >\n                    Edit\n                  </button>\n                )}\n              </div>\n\n              {row.openStep === 3 ? (\n                <div className=\"mt-3 grid grid-cols-1 md:grid-cols-2 gap-3\">\n                  <input\n                    value={row.speed}\n                    onChange={(e) =>\n                      updateField(i, { speed: e.target.value })\n                    }\n                    placeholder=\"e.g., 60 km/h\"\n                    className=\"p-2 border rounded bg-transparent\"\n                  />\n\n                  <input\n                    value={row.notes}\n                    onChange={(e) =>\n                      updateField(i, { notes: e.target.value })\n                    }\n                    placeholder=\"Notes (optional)\"\n                    className=\"p-2 border rounded bg-transparent\"\n                  />\n\n                  <div className=\"flex justify-end md:col-span-2\">\n                    <button\n                      className=\"px-4 py-2 bg-emerald-600 text-white rounded\"\n                      onClick={() => updateField(i, { openStep: 4 })}\n                    >\n                      Preview\n                    </button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"mt-2 text-sm text-zinc-500\">\n                  {row.speed ? `Speed: ${row.speed}` : \"\"}\n                  {row.notes ? ` • ${row.notes}` : \"\"}\n                </div>\n              )}\n            </div>\n\n            {/* STEP 4 — PREVIEW */}\n            <div>\n              <div className=\"text-sm font-medium\">4. Preview</div>\n\n              <div className=\"mt-3 bg-zinc-100 dark:bg-zinc-700 p-3 rounded\">\n                {previewSentence(row) || \"Complete selections to preview.\"}\n              </div>\n\n              <div className=\"mt-3 flex justify-end\">\n                <button\n                  className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n                  onClick={() => updateField(i, { openStep: 1 })}\n                >\n                  Edit All\n                </button>\n              </div>\n            </div>\n          </div>\n        );\n      })}\n\n      <div className=\"pt-3 flex justify-end\">\n        <button\n          className=\"px-4 py-2 bg-emerald-600 text-white rounded\"\n          onClick={addRow}\n        >\n          + Add Another Issue\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 618, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/api/backend.ts"],"sourcesContent":["// frontend/src/app/api/backend.ts\nimport axios from \"axios\";\n\nconst API_BASE = \"http://localhost:8000\";\n\nexport interface CatalogResponse {\n  success: boolean;\n  catalog: any;\n}\n\nexport interface ProcessResponse {\n  success: boolean;\n  data?: { answer: string; retrieved: any[] };\n  error?: string;\n}\n\nexport interface ParseResponse {\n  success: boolean;\n  parsed?: any;\n  raw?: string;\n  error?: string;\n}\n\nexport async function fetchCatalog(): Promise<any | null> {\n  const res = await axios.get<CatalogResponse>(`${API_BASE}/catalog`);\n  if (res.data?.success && res.data.catalog) {\n    try {\n      return JSON.parse(res.data.catalog);\n    } catch {\n      return res.data.catalog;\n    }\n  }\n  return null;\n}\n\nexport async function sendQuery(text: string, top_k = 4): Promise<ProcessResponse> {\n  const res = await axios.post<ProcessResponse>(`${API_BASE}/process`, { text, top_k });\n  return res.data;\n}\n\nexport async function parseQuery(text: string): Promise<ParseResponse> {\n  const res = await axios.post<ParseResponse>(`${API_BASE}/parse`, { text });\n  return res.data;\n}\nexport async function processQuery(finalPrompt: string) {\n  const res = await fetch(\"http://127.0.0.1:8000/process\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ text: finalPrompt })\n  });\n  return res.json();\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;;;;;AAClC;;AAEA,MAAM,WAAW;AAoBV,eAAe;IACpB,MAAM,MAAM,MAAM,4JAAK,CAAC,GAAG,CAAkB,GAAG,SAAS,QAAQ,CAAC;IAClE,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,CAAC,OAAO,EAAE;QACzC,IAAI;YACF,OAAO,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO;QACpC,EAAE,OAAM;YACN,OAAO,IAAI,IAAI,CAAC,OAAO;QACzB;IACF;IACA,OAAO;AACT;AAEO,eAAe,UAAU,IAAY,EAAE,QAAQ,CAAC;IACrD,MAAM,MAAM,MAAM,4JAAK,CAAC,IAAI,CAAkB,GAAG,SAAS,QAAQ,CAAC,EAAE;QAAE;QAAM;IAAM;IACnF,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,WAAW,IAAY;IAC3C,MAAM,MAAM,MAAM,4JAAK,CAAC,IAAI,CAAgB,GAAG,SAAS,MAAM,CAAC,EAAE;QAAE;IAAK;IACxE,OAAO,IAAI,IAAI;AACjB;AACO,eAAe,aAAa,WAAmB;IACpD,MAAM,MAAM,MAAM,MAAM,iCAAiC;QACvD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,MAAM;QAAY;IAC3C;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 672, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/query/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport Chip from \"@/components/Chip\";\nimport CategoryCard from \"@/components/CategoryCard\";\nimport { fetchCatalog } from \"@/app/api/backend\";\nimport clsx from \"clsx\";\n\nexport default function QueryBuilderPage() {\n  const [catalog, setCatalog] = useState<any | null>(null);\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\n  const [categoryStates, setCategoryStates] = useState<Record<string, any>>({});\n  const [centered, setCentered] = useState(true);\n\n  useEffect(()=>{ fetchCatalog().then(setCatalog); }, []);\n\n  if (!catalog) return <div className=\"min-h-screen flex items-center justify-center\">Loading…</div>;\n\n  const categories = Object.keys(catalog);\n\n  const toggleCategory = (cat: string) => {\n    setSelectedCategories(prev => {\n      const next = prev.includes(cat) ? prev.filter(x=>x!==cat) : [...prev, cat];\n      // initialize category state if selected\n      if (!prev.includes(cat)) setCategoryStates(cs => ({...cs, [cat]: { issues: [], subtypes: [], speed:\"\", notes:\"\" }}));\n      else setCategoryStates(cs => { const n = {...cs}; delete n[cat]; return n; });\n      return next;\n    });\n  };\n\n  const handleCategoryChange = (cat: string, state: any) => {\n    setCategoryStates(prev => ({ ...prev, [cat]: state }));\n  };\n\n  const handleSubmitAll = async () => {\n    // build final combined sentence (Option B)\n    const sentences = selectedCategories.map(cat => {\n      const s = categoryStates[cat];\n      if (!s || !s.issues?.length || !s.subtypes?.length) return null;\n      const iss = s.issues.join(\" & \");\n      const subs = s.subtypes.join(\" | \");\n      const speed = s.speed ? ` on ${s.speed} road` : \"\";\n      return `${iss} ${subs}${speed}.`;\n    }).filter(Boolean);\n    const finalPrompt = sentences.join(\" \");\n    // send to backend (use your processQuery)\n    console.log(\"Final prompt:\", finalPrompt);\n    // call process endpoint...\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-start md:items-center justify-center py-12\">\n      <div className=\"w-full max-w-3xl\">\n        <header className=\"text-center mb-6\">\n          <h1 className=\"text-2xl font-bold\">RoadMarshal AI</h1>\n          <p className=\"text-sm text-zinc-500 mt-2\">Hi — how can I assist you today? Select your query type(s) below.</p>\n        </header>\n\n        {/* Category chips */}\n        <div className=\"mb-6 flex flex-wrap gap-3 justify-center\">\n          {categories.map(cat => (\n            <Chip key={cat} label={cat} selected={selectedCategories.includes(cat)} onClick={()=>toggleCategory(cat)} />\n          ))}\n        </div>\n\n        {/* Category cards (progressive, collapse completed ones) */}\n        <div className=\"space-y-6\">\n          {selectedCategories.map(cat => (\n            <CategoryCard key={cat} category={cat} catalog={catalog} onChange={(st:any)=>handleCategoryChange(cat, st)} initial={categoryStates[cat]} />\n          ))}\n        </div>\n\n        {/* final actions */}\n        <div className=\"mt-8 flex justify-center gap-3\">\n          <button className=\"px-6 py-3 bg-zinc-100 dark:bg-zinc-800 border rounded\" onClick={()=>{ /* edit */ }}>Edit</button>\n          <button className=\"px-6 py-3 bg-emerald-600 text-white rounded\" onClick={handleSubmitAll}>Submit All</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}
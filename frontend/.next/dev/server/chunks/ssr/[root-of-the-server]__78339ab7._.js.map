{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/api/backend.ts"],"sourcesContent":["// frontend/src/app/api/backend.ts\nimport axios from \"axios\";\n\nconst API_BASE = \"http://localhost:8000\";\n\nexport interface CatalogResponse {\n  success: boolean;\n  catalog: any;\n}\n\nexport interface ProcessResponse {\n  success: boolean;\n  data?: { answer: string; retrieved: any[] };\n  error?: string;\n}\n\nexport interface ParseResponse {\n  success: boolean;\n  parsed?: any;\n  raw?: string;\n  error?: string;\n}\n\nexport async function fetchCatalog(): Promise<any | null> {\n  const res = await axios.get<CatalogResponse>(`${API_BASE}/catalog`);\n  if (res.data?.success && res.data.catalog) {\n    if (typeof res.data.catalog === 'string') {\n      return JSON.parse(res.data.catalog);\n    } else {\n      return res.data.catalog;\n    }\n  }\n  return null;\n}\n\nexport async function sendQuery(text: string, top_k = 4): Promise<ProcessResponse> {\n  const res = await axios.post<ProcessResponse>(`${API_BASE}/process`, { text, top_k });\n  return res.data;\n}\n\nexport async function parseQuery(text: string): Promise<ParseResponse> {\n  const res = await axios.post<ParseResponse>(`${API_BASE}/parse`, { text });\n  return res.data;\n}\nexport async function processQuery(finalPrompt: string) {\n  const res = await fetch(\"http://127.0.0.1:8000/process\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ text: finalPrompt })\n  });\n  return res.json();\n}\n\n"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;;;;;AAClC;;AAEA,MAAM,WAAW;AAoBV,eAAe;IACpB,MAAM,MAAM,MAAM,4JAAK,CAAC,GAAG,CAAkB,GAAG,SAAS,QAAQ,CAAC;IAClE,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,CAAC,OAAO,EAAE;QACzC,IAAI,OAAO,IAAI,IAAI,CAAC,OAAO,KAAK,UAAU;YACxC,OAAO,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO;QACpC,OAAO;YACL,OAAO,IAAI,IAAI,CAAC,OAAO;QACzB;IACF;IACA,OAAO;AACT;AAEO,eAAe,UAAU,IAAY,EAAE,QAAQ,CAAC;IACrD,MAAM,MAAM,MAAM,4JAAK,CAAC,IAAI,CAAkB,GAAG,SAAS,QAAQ,CAAC,EAAE;QAAE;QAAM;IAAM;IACnF,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,WAAW,IAAY;IAC3C,MAAM,MAAM,MAAM,4JAAK,CAAC,IAAI,CAAgB,GAAG,SAAS,MAAM,CAAC,EAAE;QAAE;IAAK;IACxE,OAAO,IAAI,IAAI;AACjB;AACO,eAAe,aAAa,WAAmB;IACpD,MAAM,MAAM,MAAM,MAAM,iCAAiC;QACvD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,MAAM;QAAY;IAC3C;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/utils/prompt.ts"],"sourcesContent":["export type Row = { problems: string[]; speed?: string; notes?: string };\nexport type TypeState = { rows: Row[] };\nexport type CategoryState = { [typeName: string]: TypeState };\nexport type AppState = Record<string, CategoryState>;\n\nexport function generateHumanPrompt(state: AppState, customParsedPrompt?: string | null): string {\n  if (!state || Object.keys(state).length === 0) {\n    if (customParsedPrompt) {\n      return customParsedPrompt;\n    }\n    return \"\";\n  }\n  const parts: string[] = [];\n  for (const category of Object.keys(state)) {\n    const types = state[category];\n    if (!types || Object.keys(types).length === 0) continue;\n    parts.push(`**${category}**`);\n    \n    for (const issueName of Object.keys(types)) {\n      const typeState = types[issueName];\n      if (!typeState.rows || typeState.rows.length === 0) continue;\n      parts.push(`    **Issue:** ${issueName}`);\n      for (const r of typeState.rows) {\n        if (r.problems && r.problems.length > 0) {\n          const subtypes = r.problems.join(\", \");\n          parts.push(`        **Subtypes**: ${subtypes}`);\n        }\n        if (r.speed) {\n          parts.push(`        **Road Speed Limit:** ${r.speed}`);\n        }\n        if (r.notes) {\n          parts.push(`        **Notes:** ${r.notes}`);\n        }\n      }\n    }\n    parts.push(\"\\n\");\n  }\n  if (customParsedPrompt) {\n    parts.push(\"**Custom Query:**\");\n    const customLines = customParsedPrompt.split('\\n');\n    customLines.forEach(line => {\n      parts.push(`    ${line}`);\n    });\n  }\n  return parts.join(\"\\n\");\n}\n\n\nexport function generateLLMPrompt(state: AppState, customParsedPrompt?: string | null): string {\n  const header = `Please recommend road safety interventions for the following issues. Use only retrieved context and cite clauses exactly as provided. Do not hallucinate clause numbers. Output in markdown.`;\n  const bodyParts: string[] = [];\n  for (const category of Object.keys(state)) {\n    const types = state[category];\n    if (!types || Object.keys(types).length === 0) continue;\n    for (const typeName of Object.keys(types)) {\n      const typeState = types[typeName];\n      if (!typeState.rows || typeState.rows.length === 0) continue;\n      const rowsText = typeState.rows.map((r) => {\n        const probs = r.problems && r.problems.length ? r.problems.join(\" | \") : \"\";\n        const speed = r.speed ? ` @${r.speed}` : \"\";\n        const notes = r.notes ? ` (${r.notes})` : \"\";\n        return `${probs}${speed}${notes}`.trim();\n      }).filter(Boolean).join(\" ; \");\n      if (rowsText) {\n        bodyParts.push(`${category} :: ${typeName} :: ${rowsText}`);\n      }\n    }\n  }\n  if (customParsedPrompt) {\n    bodyParts.push(`CUSTOM :: ${customParsedPrompt}`);\n  }\n  const body = bodyParts.join(\"\\n\");\n  return `${header}\\n\\n${body}\\n\\nInstructions: For each issue, provide (1) Issue Summary, (2) Recommended Interventions, (3) Standard & Clause References, (4) Brief Reasoning. Use only retrieved context.`;\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 218, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/components/Chip.tsx"],"sourcesContent":["\"use client\";\nimport clsx from \"clsx\";\n\nexport default function Chip({\n  label,\n  selected = false,\n  onClick,\n  className = \"\"\n}: {\n  label: string;\n  selected?: boolean;\n  onClick?: () => void;\n  className?: string;\n}) {\n  return (\n    <button\n      onClick={onClick}\n      className={clsx(\n        \"px-5 py-3 text-base font-semibold rounded-xl border transition-all\",\n        selected\n          ? \"bg-emerald-600 text-white border-emerald-700 shadow\"\n          : \"bg-zinc-200 dark:bg-zinc-700 text-zinc-800 dark:text-zinc-200 border-zinc-300 dark:border-zinc-600 hover:bg-zinc-300 dark:hover:bg-zinc-600\"\n      )}\n    >\n      {label}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,KAAK,EAC3B,KAAK,EACL,WAAW,KAAK,EAChB,OAAO,EACP,YAAY,EAAE,EAMf;IACC,qBACE,0PAAC;QACC,SAAS;QACT,WAAW,IAAA,4JAAI,EACb,sEACA,WACI,wDACA;kBAGL;;;;;;AAGP"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,kLAAO,EAAC,IAAA,yJAAI,EAAC;AACtB"}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,mLAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,oLAAI,GAAG;IAE9B,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 316, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,0PAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 341, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/lib/computeIssues.ts"],"sourcesContent":["export function computeIssuesForCategory(category: string, catalog: any): string[] {\n  if (!catalog || !catalog[category]) return [];\n\n  const allIssues = new Set<string>();\n\n  Object.values(catalog[category]).forEach((sub: any) => {\n    if (sub.problems && Array.isArray(sub.problems)) {\n      sub.problems.forEach((p: string) => allIssues.add(p));\n    }\n  });\n\n  return Array.from(allIssues);\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,yBAAyB,QAAgB,EAAE,OAAY;IACrE,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,EAAE;IAE7C,MAAM,YAAY,IAAI;IAEtB,OAAO,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;QACxC,IAAI,IAAI,QAAQ,IAAI,MAAM,OAAO,CAAC,IAAI,QAAQ,GAAG;YAC/C,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAc,UAAU,GAAG,CAAC;QACpD;IACF;IAEA,OAAO,MAAM,IAAI,CAAC;AACpB"}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/lib/computeSubtypes.ts"],"sourcesContent":["export function computeSubtypesForIssue(category: string, issue: string, catalog: any) {\n  const subtypes = catalog[category] || {};\n  const valid: string[] = [];\n\n  Object.entries(subtypes).forEach(([subtypeName, subtypeObj]: any) => {\n    if (Array.isArray(subtypeObj.problems) && subtypeObj.problems.includes(issue)) {\n      valid.push(subtypeName);\n    }\n  });\n\n  return valid.sort();\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,wBAAwB,QAAgB,EAAE,KAAa,EAAE,OAAY;IACnF,MAAM,WAAW,OAAO,CAAC,SAAS,IAAI,CAAC;IACvC,MAAM,QAAkB,EAAE;IAE1B,OAAO,OAAO,CAAC,UAAU,OAAO,CAAC,CAAC,CAAC,aAAa,WAAgB;QAC9D,IAAI,MAAM,OAAO,CAAC,WAAW,QAAQ,KAAK,WAAW,QAAQ,CAAC,QAAQ,CAAC,QAAQ;YAC7E,MAAM,IAAI,CAAC;QACb;IACF;IAEA,OAAO,MAAM,IAAI;AACnB"}},
    {"offset": {"line": 377, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/components/CategoryCard.tsx"],"sourcesContent":["\"use client\";\nimport { useState, useEffect, useRef } from \"react\";\nimport Chip from \"@/components/Chip\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { computeIssuesForCategory } from \"@/lib/computeIssues\";\nimport { computeSubtypesForIssue } from \"@/lib/computeSubtypes\";\nimport type { CategoryState } from \"@/app/utils/prompt\";\nimport { CheckCircle2, Circle, ChevronRight, X, Plus } from \"lucide-react\";\n\ntype Row = {\n  issue: string;\n  subtypes: string[];\n  speed: string;\n  notes: string;\n  openStep: number;\n};\n\nexport default function CategoryCard({\n  id,\n  catalog,\n  value,\n  onChange,\n}: {\n  id: string;\n  catalog: Record<string, unknown> | null;\n  value: CategoryState;\n  onChange: (next: CategoryState) => void;\n}) {\n  const issuesAvailable: string[] = computeIssuesForCategory(id, catalog);\n\n  const categoryStateToRows = (state: CategoryState): Row[] => {\n    const rows: Row[] = [];\n    Object.entries(state).forEach(([issueName, typeState]) => {\n      typeState.rows.forEach((row) => {\n        rows.push({\n          issue: issueName,\n          subtypes: row.problems || [],\n          speed: row.speed || \"\",\n          notes: row.notes || \"\",\n          openStep: 1, \n        });\n      });\n    });\n    return rows.length > 0 ? rows : [{ issue: \"\", subtypes: [], speed: \"\", notes: \"\", openStep: 1 }];\n  };\n\n  const rowsToCategoryState = (rows: Row[]): CategoryState => {\n    const state: CategoryState = {};\n    rows.forEach((row) => {\n      if (!row.issue || row.subtypes.length === 0) return;\n      \n      const issueKey = row.issue;\n      if (!state[issueKey]) {\n        state[issueKey] = { rows: [] };\n      }\n      \n      state[issueKey].rows.push({\n        problems: row.subtypes,\n        speed: row.speed || undefined,\n        notes: row.notes || undefined,\n      });\n    });\n    return state;\n  };\n\n  const [rows, setRows] = useState<Row[]>(() => categoryStateToRows(value || {}));\n  const [lastValue, setLastValue] = useState<string>(() => JSON.stringify(value || {}));\n  const [localInputs, setLocalInputs] = useState<{ [key: number]: { speed: string; notes: string } }>({});\n  const isInternalUpdate = useRef(false);\n\n  useEffect(() => {\n    if (isInternalUpdate.current) {\n      isInternalUpdate.current = false;\n      return; \n    }\n    \n    const newValueStr = JSON.stringify(value || {});\n    if (newValueStr !== lastValue) {\n      setRows((currentRows) => {\n        const newRows = categoryStateToRows(value || {});\n        const preservedRows = newRows.map((newRow) => {\n          const matchingRow = currentRows.find(\n            (r) => r.issue === newRow.issue && \n                   JSON.stringify(r.subtypes.sort()) === JSON.stringify(newRow.subtypes.sort()) &&\n                   r.speed === newRow.speed &&\n                   r.notes === newRow.notes\n          );\n          if (matchingRow && matchingRow.openStep) {\n            return { ...newRow, openStep: matchingRow.openStep };\n          }\n          return newRow;\n        });\n        return preservedRows;\n      });\n      setLastValue(newValueStr);\n      setLocalInputs({});\n    }\n  }, [value, lastValue]);\n\n  const updateRows = (next: Row[]) => {\n    isInternalUpdate.current = true;\n    setRows(next);\n    onChange(rowsToCategoryState(next));\n  };\n\n  const updateField = (i: number, patch: Partial<Row>) => {\n    const next = [...rows];\n    const oldIssue = next[i].issue;\n    next[i] = { ...next[i], ...patch };\n    if (patch.issue && patch.issue !== oldIssue && oldIssue) {\n      next[i].subtypes = [];\n      next[i].speed = \"\";\n      next[i].notes = \"\";\n      next[i].openStep = 2; \n    }\n    updateRows(next);\n  };\n\n  const addRow = () => {\n    updateRows([\n      ...rows,\n      { issue: \"\", subtypes: [], speed: \"\", notes: \"\", openStep: 1 },\n    ]);\n  };\n\n  const removeRow = (i: number) => {\n    updateRows(rows.filter((_, idx) => idx !== i));\n  };\n\n  const toggleSubtype = (i: number, subtype: string) => {\n    const next = [...rows];\n    const row = next[i];\n\n    row.subtypes = row.subtypes.includes(subtype)\n      ? row.subtypes.filter((x) => x !== subtype)\n      : [...row.subtypes, subtype];\n\n    updateRows(next);\n  };\n\n  const preview = (row: Row) => {\n    if (!row.issue || row.subtypes.length === 0) return \"Incomplete…\";\n    const sub = row.subtypes.join(\" | \");\n    const spd = row.speed ? ` on ${row.speed} road` : \"\";\n    return `${row.issue}: ${sub}${spd}${row.notes ? ` — ${row.notes}` : \"\"}`;\n  };\n\n  if (!catalog || !catalog[id]) {\n    return (\n      <div className=\"w-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl p-6 shadow-sm\">\n        <h3 className=\"text-xl font-semibold text-zinc-900 dark:text-zinc-100\">{id}</h3>\n        <p className=\"text-sm text-zinc-500 dark:text-zinc-400 mt-2\">Loading catalog...</p>\n      </div>\n    );\n  }\n\n  const getStepStatus = (row: Row, step: number) => {\n    if (step === 1) return row.issue ? \"complete\" : row.openStep === 1 ? \"active\" : \"pending\";\n    if (step === 2) {\n      if (!row.issue) return \"disabled\";\n      return row.subtypes.length > 0 ? \"complete\" : row.openStep === 2 ? \"active\" : \"pending\";\n    }\n    if (step === 3) {\n      if (!row.issue || row.subtypes.length === 0) return \"disabled\";\n      return row.speed || row.notes ? \"complete\" : row.openStep === 3 ? \"active\" : \"pending\";\n    }\n    if (step === 4) {\n      if (!row.issue || row.subtypes.length === 0) return \"disabled\";\n      return row.openStep === 4 ? \"active\" : \"complete\";\n    }\n    return \"pending\";\n  };\n\n  const getDisplayName = (categoryId: string) => {\n    if (categoryId === \"Traffic Calming Measures\") return \"Traffic Calming\";\n    return categoryId;\n  };\n\n  return (\n    <div className=\"w-full h-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl p-5 shadow-sm flex flex-col max-h-[800px]\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-xl font-bold text-zinc-900 dark:text-zinc-100\">{getDisplayName(id)}</h3>\n      </div>\n      <div className=\"flex-1 overflow-y-auto space-y-4 min-h-0\">\n\n      {rows.map((row, i) => {\n        const subtypesAvailable: string[] = row.issue && catalog\n          ? computeSubtypesForIssue(id, row.issue, catalog)\n          : [];\n\n        const step1Status = getStepStatus(row, 1);\n        const step2Status = getStepStatus(row, 2);\n        const step3Status = getStepStatus(row, 3);\n        const step4Status = getStepStatus(row, 4);\n\n        return (\n          <div\n            key={i}\n            className=\"border border-zinc-200 dark:border-zinc-800 rounded-xl p-4 bg-gradient-to-br from-zinc-50 to-white dark:from-zinc-900 dark:to-zinc-800 space-y-4 shadow-sm\"\n          >\n            <div className=\"flex justify-between items-center pb-3 border-b border-zinc-200 dark:border-zinc-800\">\n              <div className=\"flex items-center gap-3\">\n                <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 font-semibold text-sm\">\n                  {i + 1}\n                </div>\n                <span className=\"font-semibold text-base text-zinc-900 dark:text-zinc-100\">Issue #{i + 1}</span>\n              </div>\n\n              {i > 0 && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => removeRow(i)}\n                  className=\"text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20\"\n                >\n                  <X className=\"w-4 h-4 mr-1\" />\n                  Remove\n                </Button>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  {step1Status === \"complete\" ? (\n                    <CheckCircle2 className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400\" />\n                  ) : step1Status === \"active\" ? (\n                    <Circle className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400 fill-emerald-600 dark:fill-emerald-400\" />\n                  ) : (\n                    <Circle className=\"w-4 h-4 text-zinc-400 dark:text-zinc-600\" />\n                  )}\n                  <span className=\"font-semibold text-sm text-zinc-900 dark:text-zinc-100\">\n                    1. Select Issue\n                  </span>\n                </div>\n\n                {row.openStep !== 1 && row.issue && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => updateField(i, { openStep: 1 })}\n                    className=\"text-xs h-7\"\n                  >\n                    Edit\n                  </Button>\n                )}\n              </div>\n\n              {row.openStep === 1 ? (\n                <div className=\"pl-6 space-y-2\">\n                  <p className=\"text-xs text-zinc-600 dark:text-zinc-400\">Choose the issue you want to address:</p>\n                  <div className=\"flex flex-wrap gap-2\">\n                    {issuesAvailable.map((iss) => (\n                      <Chip\n                        key={iss}\n                        label={iss}\n                        selected={row.issue === iss}\n                        onClick={() =>\n                          updateField(i, {\n                            issue: iss,\n                            openStep: 2,\n                          })\n                        }\n                      />\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"pl-6\">\n                  {row.issue ? (\n                    <div className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg\">\n                      <CheckCircle2 className=\"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400\" />\n                      <span className=\"text-sm font-medium text-emerald-900 dark:text-emerald-100\">{row.issue}</span>\n                    </div>\n                  ) : (\n                    <span className=\"text-sm text-zinc-400 dark:text-zinc-600\">No issue selected</span>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  {step2Status === \"complete\" ? (\n                    <CheckCircle2 className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400\" />\n                  ) : step2Status === \"active\" ? (\n                    <Circle className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400 fill-emerald-600 dark:fill-emerald-400\" />\n                  ) : step2Status === \"disabled\" ? (\n                    <Circle className=\"w-4 h-4 text-zinc-300 dark:text-zinc-700\" />\n                  ) : (\n                    <Circle className=\"w-4 h-4 text-zinc-400 dark:text-zinc-600\" />\n                  )}\n                  <span className={`font-semibold text-sm ${\n                    step2Status === \"disabled\" \n                      ? \"text-zinc-400 dark:text-zinc-600\" \n                      : \"text-zinc-900 dark:text-zinc-100\"\n                  }`}>\n                    2. Select Subtypes\n                  </span>\n                </div>\n                {row.openStep !== 2 && row.subtypes.length > 0 && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => updateField(i, { openStep: 2 })}\n                    className=\"text-xs h-7\"\n                  >\n                    Edit\n                  </Button>\n                )}\n              </div>\n\n              {row.openStep === 2 ? (\n                <div className=\"pl-6 space-y-2\">\n                  <p className=\"text-xs text-zinc-600 dark:text-zinc-400\">Select one or more subtypes:</p>\n                  {subtypesAvailable.length === 0 ? (\n                    <div className=\"text-sm text-zinc-500 dark:text-zinc-400 p-2 bg-zinc-100 dark:bg-zinc-800 rounded-lg\">\n                      No subtypes available for this issue.\n                    </div>\n                  ) : (\n                    <>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {subtypesAvailable.map((s) => (\n                          <Chip\n                            key={s}\n                            label={s}\n                            selected={row.subtypes.includes(s)}\n                            onClick={() => toggleSubtype(i, s)}\n                          />\n                        ))}\n                      </div>\n                      {row.subtypes.length > 0 && (\n                        <div className=\"flex justify-end pt-2\">\n                          <Button\n                            onClick={() => {\n                              updateField(i, { openStep: 3 });\n                            }}\n                            size=\"sm\"\n                            className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n                          >\n                            Continue\n                            <ChevronRight className=\"w-3.5 h-3.5 ml-1\" />\n                          </Button>\n                        </div>\n                      )}\n                    </>\n                  )}\n                </div>\n              ) : (\n                <div className=\"pl-6\">\n                  {row.subtypes.length > 0 ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {subtypesAvailable.length > 0 ? (\n                        subtypesAvailable.map((s) => (\n                          <Chip\n                            key={s}\n                            label={s}\n                            selected={row.subtypes.includes(s)}\n                            onClick={() => toggleSubtype(i, s)}\n                          />\n                        ))\n                      ) : (\n                        row.subtypes.map((s) => (\n                          <div\n                            key={s}\n                            className=\"inline-flex items-center gap-1.5 px-3 py-1.5 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-lg\"\n                          >\n                            <CheckCircle2 className=\"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400\" />\n                            <span className=\"text-sm font-medium text-emerald-900 dark:text-emerald-100\">{s}</span>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                  ) : (\n                    <span className=\"text-sm text-zinc-400 dark:text-zinc-600\">\n                      {!row.issue ? \"Select an issue first\" : \"No subtypes selected\"}\n                    </span>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  {step3Status === \"complete\" ? (\n                    <CheckCircle2 className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400\" />\n                  ) : step3Status === \"active\" ? (\n                    <Circle className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400 fill-emerald-600 dark:fill-emerald-400\" />\n                  ) : step3Status === \"disabled\" ? (\n                    <Circle className=\"w-4 h-4 text-zinc-300 dark:text-zinc-700\" />\n                  ) : (\n                    <Circle className=\"w-4 h-4 text-zinc-400 dark:text-zinc-600\" />\n                  )}\n                  <span className={`font-semibold text-sm ${\n                    step3Status === \"disabled\" \n                      ? \"text-zinc-400 dark:text-zinc-600\" \n                      : \"text-zinc-900 dark:text-zinc-100\"\n                  }`}>\n                    3. Speed & Notes\n                  </span>\n                </div>\n                {row.openStep !== 3 && (row.speed || row.notes) && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => {\n                      setLocalInputs(prev => ({ ...prev, [i]: { speed: row.speed, notes: row.notes } }));\n                      updateField(i, { openStep: 3 });\n                    }}\n                    className=\"text-xs h-7\"\n                  >\n                    Edit\n                  </Button>\n                )}\n              </div>\n\n              {row.openStep === 3 ? (\n                <div className=\"pl-6 space-y-3\">\n                  <p className=\"text-xs text-zinc-600 dark:text-zinc-400\">Add additional details (optional):</p>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n                    <div className=\"space-y-1.5\">\n                      <label className=\"text-xs font-medium text-zinc-700 dark:text-zinc-300\">Speed</label>\n                      <Input\n                        value={localInputs[i]?.speed ?? row.speed}\n                        onChange={(e) => {\n                          setLocalInputs(prev => ({ \n                            ...prev, \n                            [i]: { \n                              speed: e.target.value, \n                              notes: prev[i]?.notes ?? row.notes \n                            } \n                          }));\n                        }}\n                        placeholder=\"e.g., 60 km/h\"\n                        className=\"w-full\"\n                      />\n                    </div>\n\n                    <div className=\"space-y-1.5\">\n                      <label className=\"text-xs font-medium text-zinc-700 dark:text-zinc-300\">Notes</label>\n                      <Input\n                        value={localInputs[i]?.notes ?? row.notes}\n                        onChange={(e) => {\n                          setLocalInputs(prev => ({ \n                            ...prev, \n                            [i]: { \n                              speed: prev[i]?.speed ?? row.speed, \n                              notes: e.target.value \n                            } \n                          }));\n                        }}\n                        placeholder=\"Additional information (optional)\"\n                        className=\"w-full\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"flex justify-end pt-1\">\n                    <Button\n                      onClick={() => {\n                        const localSpeed = localInputs[i]?.speed ?? row.speed;\n                        const localNotes = localInputs[i]?.notes ?? row.notes;\n                        updateField(i, { speed: localSpeed, notes: localNotes, openStep: 4 });\n                        setLocalInputs(prev => {\n                          const next = { ...prev };\n                          delete next[i];\n                          return next;\n                        });\n                      }}\n                      size=\"sm\"\n                      className=\"bg-emerald-600 hover:bg-emerald-700 text-white\"\n                    >\n                      Preview\n                      <ChevronRight className=\"w-3.5 h-3.5 ml-1\" />\n                    </Button>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"pl-6\">\n                  {row.speed || row.notes ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {row.speed && (\n                        <div className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n                          <span className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n                            Speed: {row.speed}\n                          </span>\n                        </div>\n                      )}\n                      {row.notes && (\n                        <div className=\"inline-flex items-center gap-2 px-3 py-1.5 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\n                          <span className=\"text-sm font-medium text-blue-900 dark:text-blue-100\">\n                            Notes: {row.notes}\n                          </span>\n                        </div>\n                      )}\n                    </div>\n                  ) : (\n                    <span className=\"text-sm text-zinc-400 dark:text-zinc-600\">\n                      {step3Status === \"disabled\" ? \"Complete previous steps first\" : \"No speed or notes added\"}\n                    </span>\n                  )}\n                </div>\n              )}\n            </div>\n\n            <div className=\"space-y-2\">\n              <div className=\"flex items-center gap-2\">\n                {step4Status === \"complete\" ? (\n                  <CheckCircle2 className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400\" />\n                ) : step4Status === \"active\" ? (\n                  <Circle className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400 fill-emerald-600 dark:fill-emerald-400\" />\n                ) : step4Status === \"disabled\" ? (\n                  <Circle className=\"w-4 h-4 text-zinc-300 dark:text-zinc-700\" />\n                ) : (\n                  <Circle className=\"w-4 h-4 text-zinc-400 dark:text-zinc-600\" />\n                )}\n                <span className={`font-semibold text-sm ${\n                  step4Status === \"disabled\" \n                    ? \"text-zinc-400 dark:text-zinc-600\" \n                    : \"text-zinc-900 dark:text-zinc-100\"\n                }`}>\n                  4. Preview\n                </span>\n              </div>\n\n              <div className=\"pl-6\">\n                <div className=\"p-3 rounded-lg bg-gradient-to-br from-emerald-50 to-blue-50 dark:from-emerald-900/20 dark:to-blue-900/20 border border-emerald-200 dark:border-emerald-800\">\n                  <p className=\"text-sm font-medium text-zinc-900 dark:text-zinc-100 whitespace-pre-wrap\">\n                    {preview(row)}\n                  </p>\n                </div>\n\n                {row.openStep === 4 && (\n                  <div className=\"mt-3 flex justify-end\">\n                    <Button\n                      onClick={() => updateField(i, { openStep: 1 })}\n                      variant=\"outline\"\n                      size=\"sm\"\n                    >\n                      Edit All\n                    </Button>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        );\n      })}\n\n      </div>\n      \n      <div className=\"pt-4 mt-4 border-t border-zinc-200 dark:border-zinc-800 flex-shrink-0\">\n        <Button\n          onClick={addRow}\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"w-full border-dashed border-2 hover:border-emerald-600 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20\"\n        >\n          <Plus className=\"w-3.5 h-3.5 mr-2\" />\n          Add Another Issue\n        </Button>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1424, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAyC;IACzE,qBACE,0PAAC;QACC,aAAU;QACV,WAAW,IAAA,qIAAE,EACX,ucACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1448, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/components/CustomQueryBox.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport React from \"react\";\nimport { parseQuery } from \"../api/backend\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Pencil } from \"lucide-react\";\n\nfunction formatPromptText(text: string): React.ReactNode[] {\n  const parts: React.ReactNode[] = [];\n  const lines = text.split('\\n');\n  let key = 0;\n  \n  lines.forEach((line, idx) => {\n    const boldRegex = /\\*\\*([^*]+)\\*\\*/g;\n    let lastIndex = 0;\n    let match;\n    const lineParts: React.ReactNode[] = [];\n    \n    while ((match = boldRegex.exec(line)) !== null) {\n      if (match.index > lastIndex) {\n        lineParts.push(line.substring(lastIndex, match.index));\n      }\n      lineParts.push(\n        <strong key={`bold-${key++}`} className=\"font-bold text-zinc-900 dark:text-zinc-100\">\n          {match[1]}\n        </strong>\n      );\n      lastIndex = match.index + match[0].length;\n    }\n    \n    if (lastIndex < line.length) {\n      lineParts.push(line.substring(lastIndex));\n    }\n    \n    if (lineParts.length === 0) {\n      lineParts.push(line);\n    }\n    \n    parts.push(\n      <span key={`line-${idx}`}>\n        {lineParts}\n      </span>\n    );\n    \n    if (idx < lines.length - 1) {\n      parts.push('\\n');\n    }\n  });\n  \n  return parts;\n}\n\nfunction formatCustomQuery(parsed: any): string {\n  if (!parsed) return \"\";\n  \n  console.log('formatCustomQuery input:', parsed, typeof parsed); \n  \n  try {\n    let data = parsed;\n    if (typeof parsed === 'string') {\n      let cleaned = parsed.trim();\n      if (cleaned.startsWith('```')) {\n        cleaned = cleaned.replace(/^```(?:json)?\\s*\\n?/i, '');\n        cleaned = cleaned.replace(/\\n?```\\s*$/g, '');\n        cleaned = cleaned.trim();\n      }\n      \n      try {\n        data = JSON.parse(cleaned);\n      } catch (parseError) {\n        console.error('JSON parse error:', parseError, 'Cleaned string:', cleaned);\n        return parsed;\n      }\n    }\n    \n    if (typeof data !== 'object' || data === null) {\n      return String(data);\n    }\n    \n    const parts: string[] = [];\n    \n    if (data.categories && Array.isArray(data.categories)) {\n      data.categories.forEach((cat: any) => {\n        if (cat && typeof cat === 'object') {\n          if (cat.category) parts.push(`**Category**: ${cat.category}`);\n          if (cat.type) parts.push(`**Type**: ${cat.type}`);\n          if (cat.problems && Array.isArray(cat.problems) && cat.problems.length > 0) {\n            parts.push(`**Problems**: ${cat.problems.join(\", \")}`);\n          }\n          if (cat.speed) parts.push(`**Speed**: ${cat.speed}`);\n          if (cat.notes) parts.push(`**Notes**: ${cat.notes}`);\n        }\n      });\n    }\n    \n    if (data.prompt) {\n      parts.push(`**Final prompt**: ${data.prompt}`);\n    }\n    \n    const result = parts.join(\"\\n\");\n    console.log('formatCustomQuery output:', result); // Debug log\n    return result;\n  } catch (error) {\n    console.error('formatCustomQuery error:', error);\n    return typeof parsed === 'string' ? parsed : JSON.stringify(parsed);\n  }\n}\n\nexport default function CustomQueryBox({\n  onParsed,\n}: {\n  onParsed?: (parsed: any) => void;\n}) {\n  const [text, setText] = useState(\"\");\n  const [parsed, setParsed] = useState<any>(null);\n  const [formattedPrompt, setFormattedPrompt] = useState<string>(\"\");\n  const [loading, setLoading] = useState(false);\n  const [isEditing, setIsEditing] = useState(true);\n  const [isEditingPrompt, setIsEditingPrompt] = useState(false);\n\n  const handleParse = async () => {\n    if (!text.trim()) return;\n\n    setLoading(true);\n    try {\n      const res = await parseQuery(text);\n      \n      let result = res.parsed || res.raw || res || null;\n      \n      if (typeof result === 'string' && result.trim().startsWith('{')) {\n        try {\n          result = JSON.parse(result);\n        } catch {\n        }\n      }\n      \n      setParsed(result);\n      \n      const formatted = formatCustomQuery(result);\n      console.log('Formatted prompt:', formatted); \n      setFormattedPrompt(formatted);\n      setIsEditing(false);\n      setIsEditingPrompt(false);\n\n      if (onParsed) {\n        onParsed(formatted);\n      }\n    } catch (error) {\n      console.error('Parse error:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleEditPrompt = () => {\n    setIsEditingPrompt(true);\n  };\n\n  const handleSavePrompt = () => {\n    setIsEditingPrompt(false);\n    if (onParsed && formattedPrompt.trim()) {\n      onParsed(formattedPrompt);\n    }\n  };\n\n  const handleEdit = () => {\n    setIsEditing(true);\n    setParsed(null);\n    setFormattedPrompt(\"\");\n    if (onParsed) {\n      onParsed(null); \n    }\n  };\n\n  return (\n    <div className=\"w-full h-full bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl p-5 shadow-sm flex flex-col max-h-[800px]\">\n      <div className=\"flex items-center justify-between mb-4\">\n        <h3 className=\"text-xl font-bold text-zinc-900 dark:text-zinc-100\">Custom Query</h3>\n        {parsed && !isEditing && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleEdit}\n            className=\"text-xs h-7\"\n          >\n            <Pencil className=\"w-3.5 h-3.5 mr-1\" />\n            Edit Query\n          </Button>\n        )}\n      </div>\n      \n      <div className=\"flex-1 overflow-y-auto space-y-3 min-h-0\">\n        {isEditing ? (\n          <Textarea\n            value={text}\n            onChange={(e) => setText(e.target.value)}\n            placeholder=\"Type your custom query here...\"\n            className=\"w-full min-h-[200px] bg-transparent\"\n          />\n        ) : parsed ? (\n          <div className=\"space-y-3\">\n            {isEditingPrompt ? (\n              <Textarea\n                value={formattedPrompt || formatCustomQuery(parsed)}\n                onChange={(e) => setFormattedPrompt(e.target.value)}\n                placeholder=\"Edit the parsed prompt...\"\n                className=\"w-full min-h-[200px] bg-transparent\"\n              />\n            ) : (\n              <div className=\"p-3 bg-zinc-50 dark:bg-zinc-800 rounded-lg border border-zinc-200 dark:border-zinc-700\">\n                <div className=\"text-sm text-zinc-900 dark:text-zinc-100 whitespace-pre-wrap font-sans\">\n                  {formatPromptText(formattedPrompt || formatCustomQuery(parsed))}\n                </div>\n              </div>\n            )}\n          </div>\n        ) : null}\n      </div>\n\n      <div className=\"pt-4 mt-4 border-t border-zinc-200 dark:border-zinc-800 flex-shrink-0 space-y-2\">\n        {isEditing ? (\n          <Button\n            onClick={handleParse}\n            disabled={loading || !text.trim()}\n            variant=\"outline\"\n            size=\"sm\"\n            className=\"w-full border-3 hover:border-emerald-600 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            {loading ? \"Parsing…\" : \"Analyze & Parse\"}\n          </Button>\n        ) : parsed && formattedPrompt ? (\n          isEditingPrompt ? (\n            <Button\n              onClick={handleSavePrompt}\n              variant=\"outline\"\n              size=\"sm\"\n              className=\"w-full border-3 hover:border-emerald-600 dark:hover:border-emerald-500 hover:bg-emerald-50 dark:hover:bg-emerald-900/20\"\n            >\n              Save Prompt\n            </Button>\n          ) : (\n            <Button\n              onClick={handleEditPrompt}\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"w-full\"\n            >\n              <Pencil className=\"w-3.5 h-3.5 mr-1\" />\n              Edit Prompt\n            </Button>\n          )\n        ) : null}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1750, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/components/LoadingView.tsx"],"sourcesContent":["export default function LoadingView({ message = \"Please wait - I'm onto it.\" }: { message?: string }) {\n  return (\n    <div className=\"min-h-screen flex items-center justify-center\">\n      <div className=\"flex flex-col items-center justify-center space-y-6\">\n        <div className=\"animate-spin h-16 w-16 border-4 border-t-emerald-600 border-zinc-200 dark:border-zinc-700 rounded-full\" />\n        <div className=\"text-center\">\n          <div className=\"text-xl font-semibold text-zinc-900 dark:text-zinc-100\">{message}</div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;;AAAe,SAAS,YAAY,EAAE,UAAU,4BAA4B,EAAwB;IAClG,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC;oBAAI,WAAU;;;;;;8BACf,0PAAC;oBAAI,WAAU;8BACb,cAAA,0PAAC;wBAAI,WAAU;kCAA0D;;;;;;;;;;;;;;;;;;;;;;AAKnF"}},
    {"offset": {"line": 1845, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/components/MarkdownRenderer.tsx"],"sourcesContent":["import ReactMarkdown from \"react-markdown\";\nimport remarkGfm from \"remark-gfm\";\n\nexport default function MarkdownRenderer({ content }: { content: string }) {\n  return (\n    <div className=\"prose prose-zinc dark:prose-invert max-w-none\">\n      <ReactMarkdown \n        remarkPlugins={[remarkGfm]}\n        components={{\n          code({ node, inline, className, children, ...props }: any) {\n            const match = /language-(\\w+)/.exec(className || '');\n            return !inline && match ? (\n              <pre className=\"bg-zinc-100 dark:bg-zinc-800 rounded-lg p-4 overflow-x-auto my-4 border border-zinc-200 dark:border-zinc-700\">\n                <code className={className} {...props}>\n                  {children}\n                </code>\n              </pre>\n            ) : (\n              <code className=\"bg-zinc-100 dark:bg-zinc-800 px-1.5 py-0.5 rounded text-sm font-mono\" {...props}>\n                {children}\n              </code>\n            );\n          },\n          pre({ children, ...props }: any) {\n            if (children && typeof children === 'object' && 'props' in children && children.props.className) {\n              return <>{children}</>;\n            }\n            return (\n              <pre className=\"bg-zinc-100 dark:bg-zinc-800 rounded-lg p-4 overflow-x-auto my-4 border border-zinc-200 dark:border-zinc-700\" {...props}>\n                {children}\n              </pre>\n            );\n          },\n        }}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS,iBAAiB,EAAE,OAAO,EAAuB;IACvE,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC,+MAAa;YACZ,eAAe;gBAAC,oKAAS;aAAC;YAC1B,YAAY;gBACV,MAAK,EAAE,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAY;oBACvD,MAAM,QAAQ,iBAAiB,IAAI,CAAC,aAAa;oBACjD,OAAO,CAAC,UAAU,sBAChB,0PAAC;wBAAI,WAAU;kCACb,cAAA,0PAAC;4BAAK,WAAW;4BAAY,GAAG,KAAK;sCAClC;;;;;;;;;;+CAIL,0PAAC;wBAAK,WAAU;wBAAwE,GAAG,KAAK;kCAC7F;;;;;;gBAGP;gBACA,KAAI,EAAE,QAAQ,EAAE,GAAG,OAAY;oBAC7B,IAAI,YAAY,OAAO,aAAa,YAAY,WAAW,YAAY,SAAS,KAAK,CAAC,SAAS,EAAE;wBAC/F,qBAAO;sCAAG;;oBACZ;oBACA,qBACE,0PAAC;wBAAI,WAAU;wBAAgH,GAAG,KAAK;kCACpI;;;;;;gBAGP;YACF;sBAEC;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 1929, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/components/ResultView.tsx"],"sourcesContent":["\"use client\";\nimport MarkdownRenderer from \"@/components/MarkdownRenderer\";\nimport html2canvas from \"html2canvas\";\nimport jsPDF from \"jspdf\";\n\nexport default function ResultView({ result, onRestart }: { result: any; onRestart: () => void }) {\n  const answer = result?.answer || result?.data?.answer || \"\";\n\n  const downloadPDF = async () => {\n    const el = document.getElementById(\"result-root\");\n    if (!el) return;\n    \n    try {\n      const canvas = await html2canvas(el, {\n        backgroundColor: \"#ffffff\",\n        useCORS: true,\n        logging: false,\n        scale: 2, \n        \n        onclone: (clonedDoc) => {\n          const clonedRoot = clonedDoc.getElementById(\"result-root\");\n          if (!clonedRoot) return;\n          \n\n          clonedDoc.querySelectorAll('style, link[rel=\"stylesheet\"]').forEach(styleEl => {\n            styleEl.remove();\n          });\n          \n\n          (clonedRoot as HTMLElement).style.width = \"800px\";\n          (clonedRoot as HTMLElement).style.boxSizing = \"border-box\";\n          (clonedRoot as HTMLElement).style.fontFamily = \"Arial, sans-serif\"; // Base font\n          \n          const walker = clonedDoc.createTreeWalker(\n            clonedRoot,\n            NodeFilter.SHOW_ELEMENT\n          );\n          \n          let node;\n          while ((node = walker.nextNode())) {\n            const elem = node as HTMLElement;\n            const tagName = elem.tagName.toLowerCase();\n            \n            elem.removeAttribute(\"class\");\n            elem.removeAttribute(\"data-theme\");\n            elem.removeAttribute(\"style\");\n            \n            elem.style.color = \"#000000\";\n            elem.style.backgroundColor = \"transparent\"; \n            elem.style.border = \"none\";\n            elem.style.textDecoration = \"none\";\n            elem.style.boxShadow = \"none\";\n            elem.style.overflow = \"visible\";\n            elem.style.whiteSpace = \"normal\";\n            elem.style.wordWrap = \"break-word\";\n\n            if (['p', 'li', 'h1', 'h2', 'h3', 'h4', 'div', 'span'].includes(tagName)) {\n                elem.style.fontFamily = \"Arial, sans-serif\";\n                elem.style.fontSize = \"16px\";\n                elem.style.lineHeight = \"1.5\";\n                elem.style.paddingTop = \"2px\";\n                elem.style.paddingBottom = \"2px\";\n            }\n\n            if (['h1', 'h2', 'h3', 'h4'].includes(tagName)) {\n                elem.style.fontWeight = \"bold\";\n                elem.style.margin = \"16px 0 8px 0\";\n            }\n            if (tagName === 'h1') elem.style.fontSize = \"24px\";\n            if (tagName === 'h2') elem.style.fontSize = \"20px\";\n\n            if (tagName === 'ul' || tagName === 'ol') {\n                elem.style.paddingLeft = \"40px\"; \n                elem.style.margin = \"10px 0\";\n            }\n            if (tagName === 'li') {\n                elem.style.listStylePosition = \"outside\"; \n                elem.style.display = \"list-item\";\n            }\n          }\n          \n          (clonedRoot as HTMLElement).style.backgroundColor = \"#ffffff\";\n          (clonedRoot as HTMLElement).style.color = \"#000000\";\n          (clonedRoot as HTMLElement).style.padding = \"40px\";\n          (clonedRoot as HTMLElement).style.boxSizing = \"border-box\";\n          (clonedRoot as HTMLElement).style.width = \"800px\";\n          (clonedRoot as HTMLElement).style.overflow = \"visible\";\n        },\n      });\n      \n      const img = canvas.toDataURL(\"image/png\");\n      const pdf = new jsPDF(\"p\", \"pt\", \"a4\");\n      \n      const imgProps = pdf.getImageProperties(img);\n      const pdfPageWidth = pdf.internal.pageSize.getWidth();\n      const pdfPageHeight = pdf.internal.pageSize.getHeight();\n      \n      const margin = 40;\n      const usableWidth = pdfPageWidth - (margin * 2);\n      const usableHeight = (imgProps.height * usableWidth) / imgProps.width;\n      const pageHeightWithMargin = pdfPageHeight - (margin * 2);\n\n      if (usableHeight > pageHeightWithMargin) {\n        let heightLeft = usableHeight;\n        let position = margin;\n        \n        pdf.addImage(img, 'PNG', margin, position, usableWidth, usableHeight);\n        heightLeft -= pageHeightWithMargin;\n        \n        let page = 1;\n        while (heightLeft > 0) {\n          pdf.addPage();\n          position = margin - (pageHeightWithMargin * page); \n          pdf.addImage(img, 'PNG', margin, position, usableWidth, usableHeight);\n          heightLeft -= pageHeightWithMargin;\n          page++;\n        }\n      } else {\n        pdf.addImage(img, \"PNG\", margin, margin, usableWidth, usableHeight);\n      }\n      \n      pdf.save(\"roadmarshal-report.pdf\");\n      \n    } catch (error) {\n      console.error(\"PDF generation failed:\", error);\n      alert(\"Failed to generate PDF. Please try again.\");\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      <div id=\"result-root\" className=\"p-4 bg-white dark:bg-zinc-900 border rounded\">\n        <MarkdownRenderer content={answer} />\n      </div>\n\n      <div className=\"flex gap-3\">\n        <button onClick={downloadPDF} className=\"px-4 py-2 bg-blue-600 text-white rounded\">Download PDF</button>\n        <button onClick={onRestart} className=\"px-4 py-2 border rounded\">Restart</button>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2109, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/components/Navbar.tsx"],"sourcesContent":["\"use client\";\nimport Link from \"next/link\";\nimport { Sun, Moon } from \"lucide-react\";\nimport { useTheme } from \"next-themes\";\n\nexport default function Navbar() {\n  const { theme, setTheme } = useTheme();\n\n  return (\n    <nav className=\"w-full bg-white/60 dark:bg-zinc-900/60 backdrop-blur sticky top-0 z-40 border-b\">\n      <div className=\"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between\">\n        <Link href=\"/\" className=\"flex items-center gap-3\">\n          <div className=\"h-8 w-8 bg-gradient-to-br from-blue-600 to-cyan-500 rounded-md\" />\n          <span className=\"font-semibold\">RoadMarshal.AI</span>\n        </Link>\n\n        <div className=\"flex items-center gap-3\">\n          <button\n            onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n            className=\"p-2 rounded-md hover:bg-zinc-100 dark:hover:bg-zinc-800\"\n            aria-label=\"Toggle theme\"\n          >\n            {theme === \"dark\" ? <Sun className=\"w-5 h-5\" /> : <Moon className=\"w-5 h-5\" />}\n          </button>\n        </div>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;AAHA;;;;;AAKe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,wKAAQ;IAEpC,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC,mLAAI;oBAAC,MAAK;oBAAI,WAAU;;sCACvB,0PAAC;4BAAI,WAAU;;;;;;sCACf,0PAAC;4BAAK,WAAU;sCAAgB;;;;;;;;;;;;8BAGlC,0PAAC;oBAAI,WAAU;8BACb,cAAA,0PAAC;wBACC,SAAS,IAAM,SAAS,UAAU,SAAS,UAAU;wBACrD,WAAU;wBACV,cAAW;kCAEV,UAAU,uBAAS,0PAAC,mNAAG;4BAAC,WAAU;;;;;iDAAe,0PAAC,sNAAI;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM9E"}},
    {"offset": {"line": 2200, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/components/FinalPromptModal.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState } from \"react\";\n\nexport default function FinalPromptModal({\n  initial,\n  onConfirm,\n  onClose,\n}: {\n  initial: string;\n  onConfirm: (prompt: string) => void;\n  onClose: () => void;\n}) {\n  const [text, setText] = useState(initial);\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/40\">\n      <div className=\"w-full max-w-3xl bg-white dark:bg-zinc-900 rounded p-6\">\n        <h3 className=\"text-lg font-semibold mb-3\">I would like to confirm the prompt. Please review it. Please make changes if needed.</h3>\n        <textarea value={text} onChange={(e)=>setText(e.target.value)} className=\"w-full min-h-[160px] p-3 bg-transparent border rounded\" />\n        <div className=\"flex justify-end gap-3 mt-4\">\n          <button onClick={onClose} className=\"px-4 py-2 bg-white text-red-600 border border-red-600 rounded hover:bg-red-600 hover:text-white\">Cancel</button>\n          <button onClick={() => onConfirm(text)} className=\"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700\">Confirm & Run</button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,iBAAiB,EACvC,OAAO,EACP,SAAS,EACT,OAAO,EAKR;IACC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAC;IAEjC,qBACE,0PAAC;QAAI,WAAU;kBACb,cAAA,0PAAC;YAAI,WAAU;;8BACb,0PAAC;oBAAG,WAAU;8BAA6B;;;;;;8BAC3C,0PAAC;oBAAS,OAAO;oBAAM,UAAU,CAAC,IAAI,QAAQ,EAAE,MAAM,CAAC,KAAK;oBAAG,WAAU;;;;;;8BACzE,0PAAC;oBAAI,WAAU;;sCACb,0PAAC;4BAAO,SAAS;4BAAS,WAAU;sCAAkG;;;;;;sCACtI,0PAAC;4BAAO,SAAS,IAAM,UAAU;4BAAO,WAAU;sCAA+D;;;;;;;;;;;;;;;;;;;;;;;AAK3H"}},
    {"offset": {"line": 2276, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useEffect, useState } from \"react\";\nimport { fetchCatalog, sendQuery, ParseResponse } from \"@/app/api/backend\";\nimport { AppState, CategoryState, generateLLMPrompt, generateHumanPrompt } from \"@/app/utils/prompt\";\n\nimport Chip from \"@/components/Chip\"; \nimport CategoryCard from \"@/app/components/CategoryCard\"; \nimport CustomQueryBox from \"@/app/components/CustomQueryBox\";\nimport LoadingView from \"@/app/components/LoadingView\";\nimport ResultView from \"@/app/components/ResultView\";\nimport Navbar from \"@/app/components/Navbar\";\nimport FinalPromptModal from \"@/app/components/FinalPromptModal\";\n\nexport default function QueryPage() {\n  const [catalog, setCatalog] = useState<any>(null);\n  const [loadingCatalog, setLoadingCatalog] = useState(true);\n\n  const [appState, setAppState] = useState<AppState>({});\n  const [customParsedPrompt, setCustomParsedPrompt] = useState<string | null>(null);\n  const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\n  const categories = [\"Road Sign\", \"Road Marking\", \"Traffic Calming Measures\", \"Custom Query\"];\n  \n  const getCategoryDisplayName = (category: string) => {\n    if (category === \"Traffic Calming Measures\") return \"Traffic Calming\";\n    return category;\n  };\n\n  const formatPreviewText = (text: string): React.ReactNode[] => {\n    const parts: React.ReactNode[] = [];\n    const lines = text.split('\\n');\n    let key = 0;\n    \n    lines.forEach((line, idx) => {\n      const boldRegex = /\\*\\*(.+?)\\*\\*/g;\n      let lastIndex = 0;\n      let match;\n      const lineParts: React.ReactNode[] = [];\n      \n      while ((match = boldRegex.exec(line)) !== null) {\n        if (match.index > lastIndex) {\n          lineParts.push(line.substring(lastIndex, match.index));\n        }\n        lineParts.push(\n          <strong key={`bold-${key++}`} className=\"font-bold text-zinc-900 dark:text-zinc-100\">\n            {match[1]}\n          </strong>\n        );\n        lastIndex = match.index + match[0].length;\n      }\n      \n      if (lastIndex < line.length) {\n        lineParts.push(line.substring(lastIndex));\n      }\n      \n      if (lineParts.length === 0) {\n        lineParts.push(line);\n      }\n      \n      parts.push(\n        <span key={`line-${idx}`}>\n          {lineParts}\n        </span>\n      );\n      \n      if (idx < lines.length - 1) {\n        parts.push('\\n');\n      }\n    });\n    \n    return parts;\n  };\n\n  const [isLoading, setIsLoading] = useState(false);\n  const [result, setResult] = useState<any>(null);\n  const [showPromptModal, setShowPromptModal] = useState(false);\n\n  useEffect(() => {\n    fetchCatalog()\n      .then((data) => {\n        setCatalog(data);\n      })\n      .catch(console.error)\n      .finally(() => {\n        setLoadingCatalog(false);\n      });\n  }, []);\n\n  const toggleCategory = (cat: string) => {\n    if (selectedCategories.includes(cat)) {\n      setSelectedCategories(selectedCategories.filter(c => c !== cat));\n      if (cat !== \"Custom Query\") {\n        setAppState(prev => {\n          const next = { ...prev };\n          delete next[cat];\n          return next;\n        });\n      } else {\n        setCustomParsedPrompt(null);\n      }\n    } else {\n      if (cat === \"Custom Query\") {\n        setSelectedCategories([\"Custom Query\"]);\n        setAppState({}); \n      } else {\n       \n        setSelectedCategories([...selectedCategories.filter(c => c !== \"Custom Query\"), cat]);\n        setCustomParsedPrompt(null); \n      }\n    }\n  };\n\n  \n  const handleCategoryChange = (category: string, nextCategoryState: CategoryState) => {\n    setAppState(prev => ({\n      ...prev,\n      [category]: nextCategoryState,\n    }));\n  };\n\n  const handleCustomQueryParsed = (parsed: any) => {\n    if (parsed && typeof parsed === 'string') {\n      setCustomParsedPrompt(parsed);\n    } else {\n      setCustomParsedPrompt(null);\n    }\n  };\n\n  const restartAll = () => {\n    setAppState({});\n    setCustomParsedPrompt(null);\n    setSelectedCategories([]);\n    setResult(null);\n    setIsLoading(false);\n  };\n\n  const handleShowPrompt = () => {\n    setShowPromptModal(true);\n  };\n\n  const handleSubmit = async (confirmedPrompt?: string) => {\n    setShowPromptModal(false);\n    setIsLoading(true);\n    setResult(null);\n    \n    const finalPrompt = generateLLMPrompt(appState, customParsedPrompt);\n    \n    try {\n      const res = await sendQuery(finalPrompt);\n      setResult(res); \n    } catch (e) {\n      console.error(e);\n      setResult({ error: \"Failed to contact backend.\" }); \n    }\n    \n    setIsLoading(false);\n  };\n\n\n  if (loadingCatalog) {\n    return (\n      <>\n        <Navbar />\n        <LoadingView message=\"Loading catalog...\" />\n      </>\n    );\n  }\n\n  if (isLoading) {\n    return (\n      <>\n        <Navbar />\n        <LoadingView />\n      </>\n    );\n  }\n\n  if (result) {\n    return (\n      <>\n        <Navbar />\n        <div className=\"w-full max-w-3xl mx-auto pt-10 px-4\">\n          <ResultView result={result} onRestart={restartAll} />\n        </div>\n      </>\n    );\n  }\n\n  const canSubmit = (Object.keys(appState).length > 0 && Object.values(appState).some(cat => Object.values(cat).length > 0)) || customParsedPrompt;\n\n  return (\n    <>\n      <Navbar />\n      <div className=\"w-full max-w-7xl mx-auto pt-10 px-4 pb-20\">\n\n        \n        <header className=\"text-center mb-10\">\n          <h1 className=\"text-3xl font-bold\">Hi There !! I am RoadMarshal.AI</h1>\n          <h2 className=\"text-lg font-bold text-zinc-700 dark:text-zinc-200 mt-3\">\n            I am here to assist you with road safety interventions. Please Select your Query\n          </h2>\n          \n        </header>\n\n        \n        <div className=\"flex flex-wrap gap-3 justify-center mb-8\">\n          {categories.map(cat => (\n            <Chip\n              key={cat}\n              label={getCategoryDisplayName(cat)}\n              selected={selectedCategories.includes(cat)}\n              onClick={() => toggleCategory(cat)}\n            />\n          ))}\n        </div>\n\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          \n          {selectedCategories\n            .filter(cat => cat !== \"Custom Query\")\n            .map(cat => (\n              <CategoryCard\n                key={cat}\n                id={cat} \n                catalog={catalog}\n                value={appState[cat] || {}} \n                onChange={(next) => handleCategoryChange(cat, next)}\n              />\n            ))}\n\n          {selectedCategories.includes(\"Custom Query\") && (\n            <div className=\"flex justify-center md:col-span-2\">\n              <div className=\"w-full max-w-[800px]\">\n                <CustomQueryBox \n                  onParsed={handleCustomQueryParsed} \n                />\n              </div>\n            </div>\n          )}\n        </div>\n\n        {canSubmit && (\n          <div className=\"mt-10 border-t pt-6\">\n            <div className=\"mb-4 p-4 bg-zinc-50 dark:bg-zinc-800 rounded-lg\">\n              <h3 className=\"text-lg font-bold mb-3 text-zinc-900 dark:text-zinc-100\">Preview your query:</h3>\n              <div className=\"text-base text-zinc-700 dark:text-zinc-300 whitespace-pre-wrap font-sans\">\n                {formatPreviewText(generateHumanPrompt(appState, customParsedPrompt) || \"No query to preview\")}\n              </div>\n            </div>\n            <div className=\"flex justify-end\">\n              <button\n                onClick={handleShowPrompt}\n                className=\"px-6 py-3 bg-emerald-600 text-white rounded-lg font-semibold shadow hover:bg-emerald-700 transition\"\n              >\n                Review & Submit for Analysis\n              </button>\n            </div>\n          </div>\n        )}\n\n        \n        \n\n      </div>\n\n      {showPromptModal && (\n        <FinalPromptModal\n          initial={generateHumanPrompt(appState, customParsedPrompt)}\n          onConfirm={() => handleSubmit()}\n          onClose={() => setShowPromptModal(false)}\n        />\n      )}\n    </>\n  );\n}"],"names":[],"mappings":"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"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/api/backend.ts"],"sourcesContent":["// frontend/src/app/api/backend.ts\nimport axios from \"axios\";\n\nconst API_BASE = \"http://localhost:8000\";\n\nexport interface CatalogResponse {\n  success: boolean;\n  catalog: any;\n}\n\nexport interface ProcessResponse {\n  success: boolean;\n  data?: { answer: string; retrieved: any[] };\n  error?: string;\n}\n\nexport interface ParseResponse {\n  success: boolean;\n  parsed?: any;\n  raw?: string;\n  error?: string;\n}\n\nexport async function fetchCatalog(): Promise<any | null> {\n  const res = await axios.get<CatalogResponse>(`${API_BASE}/catalog`);\n  if (res.data?.success && res.data.catalog) {\n    try {\n      return JSON.parse(res.data.catalog);\n    } catch {\n      return res.data.catalog;\n    }\n  }\n  return null;\n}\n\nexport async function sendQuery(text: string, top_k = 4): Promise<ProcessResponse> {\n  const res = await axios.post<ProcessResponse>(`${API_BASE}/process`, { text, top_k });\n  return res.data;\n}\n\nexport async function parseQuery(text: string): Promise<ParseResponse> {\n  const res = await axios.post<ParseResponse>(`${API_BASE}/parse`, { text });\n  return res.data;\n}\nexport async function processQuery(finalPrompt: string) {\n  const res = await fetch(\"http://127.0.0.1:8000/process\", {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ text: finalPrompt })\n  });\n  return res.json();\n}"],"names":[],"mappings":"AAAA,kCAAkC;;;;;;;;;;;AAClC;;AAEA,MAAM,WAAW;AAoBV,eAAe;IACpB,MAAM,MAAM,MAAM,4JAAK,CAAC,GAAG,CAAkB,GAAG,SAAS,QAAQ,CAAC;IAClE,IAAI,IAAI,IAAI,EAAE,WAAW,IAAI,IAAI,CAAC,OAAO,EAAE;QACzC,IAAI;YACF,OAAO,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,OAAO;QACpC,EAAE,OAAM;YACN,OAAO,IAAI,IAAI,CAAC,OAAO;QACzB;IACF;IACA,OAAO;AACT;AAEO,eAAe,UAAU,IAAY,EAAE,QAAQ,CAAC;IACrD,MAAM,MAAM,MAAM,4JAAK,CAAC,IAAI,CAAkB,GAAG,SAAS,QAAQ,CAAC,EAAE;QAAE;QAAM;IAAM;IACnF,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,WAAW,IAAY;IAC3C,MAAM,MAAM,MAAM,4JAAK,CAAC,IAAI,CAAgB,GAAG,SAAS,MAAM,CAAC,EAAE;QAAE;IAAK;IACxE,OAAO,IAAI,IAAI;AACjB;AACO,eAAe,aAAa,WAAmB;IACpD,MAAM,MAAM,MAAM,MAAM,iCAAiC;QACvD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE,MAAM;QAAY;IAC3C;IACA,OAAO,IAAI,IAAI;AACjB"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/query/CategoryScreen.tsx"],"sourcesContent":["\"use client\";\nexport default function CategoryScreen({ catalog, onSelect }: any) {\n  const categories = Object.keys(catalog);\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-xl font-semibold\">Select Category</h2>\n\n      <div className=\"flex flex-wrap gap-4\">\n        {categories.map(cat => (\n          <button\n            key={cat}\n            className=\"px-6 py-3 rounded-xl bg-zinc-900 text-white hover:bg-zinc-700 transition\"\n            onClick={() => onSelect(cat)}\n          >\n            {cat}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AACe,SAAS,eAAe,EAAE,OAAO,EAAE,QAAQ,EAAO;IAC/D,MAAM,aAAa,OAAO,IAAI,CAAC;IAE/B,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAG,WAAU;0BAAwB;;;;;;0BAEtC,0PAAC;gBAAI,WAAU;0BACZ,WAAW,GAAG,CAAC,CAAA,oBACd,0PAAC;wBAEC,WAAU;wBACV,SAAS,IAAM,SAAS;kCAEvB;uBAJI;;;;;;;;;;;;;;;;AAUjB"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/lib/computeIssues.ts"],"sourcesContent":["export function computeIssuesForCategory(category: string, catalog: any) {\n  const subtypes = catalog[category] || {};\n  const issueSet = new Set<string>();\n\n  Object.values(subtypes).forEach((subtypeObj: any) => {\n    if (Array.isArray(subtypeObj.problems)) {\n      subtypeObj.problems.forEach((p: string) => issueSet.add(p.trim()));\n    }\n  });\n\n  return Array.from(issueSet).sort();\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,yBAAyB,QAAgB,EAAE,OAAY;IACrE,MAAM,WAAW,OAAO,CAAC,SAAS,IAAI,CAAC;IACvC,MAAM,WAAW,IAAI;IAErB,OAAO,MAAM,CAAC,UAAU,OAAO,CAAC,CAAC;QAC/B,IAAI,MAAM,OAAO,CAAC,WAAW,QAAQ,GAAG;YACtC,WAAW,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAc,SAAS,GAAG,CAAC,EAAE,IAAI;QAChE;IACF;IAEA,OAAO,MAAM,IAAI,CAAC,UAAU,IAAI;AAClC"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/query/IssueScreen.tsx"],"sourcesContent":["\"use client\";\nimport { computeIssuesForCategory } from \"@/lib/computeIssues\";\n\nexport default function IssueScreen({ category, catalog, onSelect }: any) {\n  const issues = computeIssuesForCategory(category, catalog);\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-xl font-semibold\">{category} → Select Issue</h2>\n\n      <div className=\"flex flex-wrap gap-3\">\n        {issues.map(issue => (\n          <button\n            key={issue}\n            onClick={() => onSelect(issue)}\n            className=\"px-5 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500\"\n          >\n            {issue}\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAGe,SAAS,YAAY,EAAE,QAAQ,EAAE,OAAO,EAAE,QAAQ,EAAO;IACtE,MAAM,SAAS,IAAA,mKAAwB,EAAC,UAAU;IAElD,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAG,WAAU;;oBAAyB;oBAAS;;;;;;;0BAEhD,0PAAC;gBAAI,WAAU;0BACZ,OAAO,GAAG,CAAC,CAAA,sBACV,0PAAC;wBAEC,SAAS,IAAM,SAAS;wBACxB,WAAU;kCAET;uBAJI;;;;;;;;;;;;;;;;AAUjB"}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/lib/computeSubtypes.ts"],"sourcesContent":["export function computeSubtypesForIssue(category: string, issue: string, catalog: any) {\n  const subtypes = catalog[category] || {};\n  const valid: string[] = [];\n\n  Object.entries(subtypes).forEach(([subtypeName, subtypeObj]: any) => {\n    if (Array.isArray(subtypeObj.problems) && subtypeObj.problems.includes(issue)) {\n      valid.push(subtypeName);\n    }\n  });\n\n  return valid.sort();\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,wBAAwB,QAAgB,EAAE,KAAa,EAAE,OAAY;IACnF,MAAM,WAAW,OAAO,CAAC,SAAS,IAAI,CAAC;IACvC,MAAM,QAAkB,EAAE;IAE1B,OAAO,OAAO,CAAC,UAAU,OAAO,CAAC,CAAC,CAAC,aAAa,WAAgB;QAC9D,IAAI,MAAM,OAAO,CAAC,WAAW,QAAQ,KAAK,WAAW,QAAQ,CAAC,QAAQ,CAAC,QAAQ;YAC7E,MAAM,IAAI,CAAC;QACb;IACF;IAEA,OAAO,MAAM,IAAI;AACnB"}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/query/SubtypeScreen.tsx"],"sourcesContent":["\"use client\";\nimport { computeSubtypesForIssue } from \"@/lib/computeSubtypes\";\nimport clsx from \"clsx\";\n\nexport default function SubtypeScreen({ category, issue, catalog, selected, onToggle, onNext }: any) {\n  const subtypes = computeSubtypesForIssue(category, issue, catalog);\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-xl font-semibold\">\n        {category} → {issue} → Select Subtypes\n      </h2>\n\n      <div className=\"flex flex-wrap gap-3\">\n        {subtypes.map(sub => (\n          <button\n            key={sub}\n            onClick={() => onToggle(sub)}\n            className={clsx(\n              \"px-4 py-2 border rounded-lg\",\n              selected.includes(sub)\n                ? \"bg-green-600 text-white border-green-600\"\n                : \"bg-white border-zinc-300\"\n            )}\n          >\n            {sub}\n          </button>\n        ))}\n      </div>\n\n      {selected.length > 0 && (\n        <button\n          onClick={onNext}\n          className=\"mt-6 px-5 py-3 bg-zinc-900 text-white rounded-lg\"\n        >\n          Next\n        </button>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,cAAc,EAAE,QAAQ,EAAE,KAAK,EAAE,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAO;IACjG,MAAM,WAAW,IAAA,oKAAuB,EAAC,UAAU,OAAO;IAE1D,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAG,WAAU;;oBACX;oBAAS;oBAAI;oBAAM;;;;;;;0BAGtB,0PAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAA,oBACZ,0PAAC;wBAEC,SAAS,IAAM,SAAS;wBACxB,WAAW,IAAA,4JAAI,EACb,+BACA,SAAS,QAAQ,CAAC,OACd,6CACA;kCAGL;uBATI;;;;;;;;;;YAcV,SAAS,MAAM,GAAG,mBACjB,0PAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAMT"}},
    {"offset": {"line": 342, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/query/FinalScreen.tsx"],"sourcesContent":["\"use client\";\nimport { useState } from \"react\";\nimport { processQuery } from \"@/app/api/backend\";\n\nexport default function FinalScreen({ category, issue, subtypes, onRestart }: any) {\n  const [speed, setSpeed] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n  const [response, setResponse] = useState<any>(null);\n\n  const finalPrompt =\n    `${category} → ${issue}\\n` +\n    `Subtypes: ${subtypes.join(\", \")}\\n` +\n    (speed ? `Speed: ${speed}\\n` : \"\") +\n    (notes ? `Notes: ${notes}\\n` : \"\");\n\n  const handleSubmit = async () => {\n    const result = await processQuery(finalPrompt);\n    setResponse(result);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-xl font-semibold\">Review & Submit</h2>\n\n      <pre className=\"bg-zinc-100 p-4 rounded text-sm\">\n        {finalPrompt}\n      </pre>\n\n      <div className=\"flex gap-4\">\n        <input\n          value={speed}\n          onChange={(e) => setSpeed(e.target.value)}\n          placeholder=\"Speed (e.g., 60 km/h)\"\n          className=\"p-2 border rounded\"\n        />\n\n        <input\n          value={notes}\n          onChange={(e) => setNotes(e.target.value)}\n          placeholder=\"Notes (optional)\"\n          className=\"p-2 border rounded\"\n        />\n      </div>\n\n      <button\n        onClick={handleSubmit}\n        className=\"px-5 py-3 bg-blue-600 text-white rounded-lg\"\n      >\n        Submit\n      </button>\n\n      {response && (\n        <div className=\"mt-6 p-4 border rounded bg-white\">\n          <h3 className=\"font-semibold mb-2\">AI Output</h3>\n          <div dangerouslySetInnerHTML={{ __html: response.answer }} />\n        </div>\n      )}\n\n      <button\n        onClick={onRestart}\n        className=\"mt-4 px-5 py-2 bg-zinc-900 text-white rounded-lg\"\n      >\n        Restart\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS,YAAY,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAO;IAC/E,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAM;IAE9C,MAAM,cACJ,GAAG,SAAS,GAAG,EAAE,MAAM,EAAE,CAAC,GAC1B,CAAC,UAAU,EAAE,SAAS,IAAI,CAAC,MAAM,EAAE,CAAC,GACpC,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,GAAG,EAAE,IACjC,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,CAAC,GAAG,EAAE;IAEnC,MAAM,eAAe;QACnB,MAAM,SAAS,MAAM,IAAA,wJAAY,EAAC;QAClC,YAAY;IACd;IAEA,qBACE,0PAAC;QAAI,WAAU;;0BACb,0PAAC;gBAAG,WAAU;0BAAwB;;;;;;0BAEtC,0PAAC;gBAAI,WAAU;0BACZ;;;;;;0BAGH,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,aAAY;wBACZ,WAAU;;;;;;kCAGZ,0PAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;wBACxC,aAAY;wBACZ,WAAU;;;;;;;;;;;;0BAId,0PAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;YAIA,0BACC,0PAAC;gBAAI,WAAU;;kCACb,0PAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,0PAAC;wBAAI,yBAAyB;4BAAE,QAAQ,SAAS,MAAM;wBAAC;;;;;;;;;;;;0BAI5D,0PAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 465, "column": 0}, "map": {"version":3,"sources":["file:///Users/anubhav/Desktop/Me/Projects/RoadMarshal_AI/frontend/src/app/query/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { fetchCatalog } from \"@/app/api/backend\";\n\nimport CategoryScreen from \"./CategoryScreen\";\nimport IssueScreen from \"./IssueScreen\";\nimport SubtypeScreen from \"./SubtypeScreen\";\nimport FinalScreen from \"./FinalScreen\";\n\nexport default function QueryFlow() {\n  const [catalog, setCatalog] = useState<any>(null);\n\n  const [step, setStep] = useState(1);\n  const [category, setCategory] = useState(\"\");\n  const [issue, setIssue] = useState(\"\");\n  const [selectedSubtypes, setSelectedSubtypes] = useState<string[]>([]);\n\n  // Load catalog once\n  useEffect(() => {\n    fetchCatalog().then(setCatalog);\n  }, []);\n\n  if (!catalog) return <div>Loading…</div>;\n\n  const restart = () => {\n    setStep(1);\n    setCategory(\"\");\n    setIssue(\"\");\n    setSelectedSubtypes([]);\n  };\n\n  return (\n    <div className=\"p-10 space-y-10\">\n      {step === 1 && (\n        <CategoryScreen\n          catalog={catalog}\n          onSelect={(cat: string) => {\n            setCategory(cat);\n            setStep(2);\n          }}\n        />\n      )}\n\n      {step === 2 && (\n        <IssueScreen\n          category={category}\n          catalog={catalog}\n          onSelect={(iss: string) => {\n            setIssue(iss);\n            setStep(3);\n          }}\n        />\n      )}\n\n      {step === 3 && (\n        <SubtypeScreen\n          category={category}\n          issue={issue}\n          catalog={catalog}\n          selected={selectedSubtypes}\n          onToggle={(sub: string) =>\n            setSelectedSubtypes(prev =>\n              prev.includes(sub) ? prev.filter(x => x !== sub) : [...prev, sub]\n            )\n          }\n          onNext={() => setStep(4)}\n        />\n      )}\n\n      {step === 4 && (\n        <FinalScreen\n          category={category}\n          issue={issue}\n          subtypes={selectedSubtypes}\n          onRestart={restart}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AARA;;;;;;;;AAUe,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,6NAAQ,EAAM;IAE5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,6NAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6NAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6NAAQ,EAAC;IACnC,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,6NAAQ,EAAW,EAAE;IAErE,oBAAoB;IACpB,IAAA,8NAAS,EAAC;QACR,IAAA,wJAAY,IAAG,IAAI,CAAC;IACtB,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS,qBAAO,0PAAC;kBAAI;;;;;;IAE1B,MAAM,UAAU;QACd,QAAQ;QACR,YAAY;QACZ,SAAS;QACT,oBAAoB,EAAE;IACxB;IAEA,qBACE,0PAAC;QAAI,WAAU;;YACZ,SAAS,mBACR,0PAAC,6JAAc;gBACb,SAAS;gBACT,UAAU,CAAC;oBACT,YAAY;oBACZ,QAAQ;gBACV;;;;;;YAIH,SAAS,mBACR,0PAAC,0JAAW;gBACV,UAAU;gBACV,SAAS;gBACT,UAAU,CAAC;oBACT,SAAS;oBACT,QAAQ;gBACV;;;;;;YAIH,SAAS,mBACR,0PAAC,4JAAa;gBACZ,UAAU;gBACV,OAAO;gBACP,SAAS;gBACT,UAAU;gBACV,UAAU,CAAC,MACT,oBAAoB,CAAA,OAClB,KAAK,QAAQ,CAAC,OAAO,KAAK,MAAM,CAAC,CAAA,IAAK,MAAM,OAAO;+BAAI;4BAAM;yBAAI;gBAGrE,QAAQ,IAAM,QAAQ;;;;;;YAIzB,SAAS,mBACR,0PAAC,0JAAW;gBACV,UAAU;gBACV,OAAO;gBACP,UAAU;gBACV,WAAW;;;;;;;;;;;;AAKrB"}}]
}